<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz CAP AEPE</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --cream: #fdf6ec;
  --warm: #f5e6d0;
  --sand: #e8d5b7;
  --sand-dark: #d4bc95;
  --terracotta: #c1724f;
  --terra-dark: #9a5538;
  --sage: #6b8f71;
  --sage-light: #c8deca;
  --dusty: #7b9eb8;
  --navy: #2c3e50;
  --charcoal: #3d4a3e;
  --gold: #d4a843;
  --rose: #d4756b;
  --text: #2a2420;
  --text-muted: #7a6b5d;
  --r: 18px;
  --rsm: 10px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'DM Sans',sans-serif;background:var(--cream);min-height:100vh;color:var(--text);overflow-x:hidden;}
body::before{content:'';position:fixed;inset:0;background-image:radial-gradient(ellipse 80% 60% at 20% 10%,rgba(193,114,79,.07) 0%,transparent 60%),radial-gradient(ellipse 60% 80% at 80% 90%,rgba(107,143,113,.08) 0%,transparent 60%),url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23c1724f' fill-opacity='.025'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");pointer-events:none;z-index:0;}
#app{max-width:860px;margin:0 auto;padding:24px 20px;position:relative;z-index:1;}
h1,h2,h3,.syne{font-family:'Syne',sans-serif;}

/* ===== HOME ===== */
#home{animation:fadeUp .5s ease;}
.home-header{text-align:center;padding:48px 20px 36px;}
.logo-wrap{display:inline-flex;align-items:center;gap:14px;margin-bottom:16px;}
.logo-icon{width:64px;height:64px;background:var(--terracotta);border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:32px;box-shadow:4px 4px 0 var(--terra-dark);}
.logo-text{font-family:'Syne',sans-serif;font-size:2.6rem;font-weight:800;color:var(--text);letter-spacing:-1px;line-height:1;}
.logo-text span{color:var(--terracotta);}
.tagline{color:var(--text-muted);font-size:1rem;margin-bottom:8px;}
.source-chip{display:inline-flex;align-items:center;gap:6px;background:var(--warm);border:1.5px solid var(--sand);border-radius:50px;padding:5px 14px;font-size:.78rem;font-weight:600;color:var(--terra-dark);margin-bottom:36px;}

.stats-strip{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-bottom:40px;}
.stat-pill{background:white;border:1.5px solid var(--sand);border-radius:50px;padding:8px 20px;font-size:.85rem;font-weight:600;color:var(--text-muted);display:flex;align-items:center;gap:7px;box-shadow:2px 2px 0 var(--sand);}
.stat-pill strong{color:var(--text);}

.section-label{font-family:'Syne',sans-serif;font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--text-muted);margin-bottom:14px;display:flex;align-items:center;gap:10px;}
.section-label::after{content:'';flex:1;height:1px;background:var(--sand);}

.mode-cards{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px;}
.mode-card{border-radius:var(--r);padding:24px 22px;cursor:pointer;transition:all .22s cubic-bezier(.34,1.56,.64,1);border:2px solid transparent;}
.mode-card:hover{transform:translateY(-4px);}
.mode-card:active{transform:translateY(-1px) scale(.99);}
.mode-card.exam{background:var(--navy);color:white;box-shadow:4px 4px 0 var(--charcoal);}
.mode-card.exam:hover{box-shadow:6px 6px 0 var(--charcoal);}
.mode-card.rapid{background:var(--terracotta);color:white;box-shadow:4px 4px 0 var(--terra-dark);}
.mode-card.rapid:hover{box-shadow:6px 6px 0 var(--terra-dark);}
.mc-icon{font-size:2.2rem;margin-bottom:10px;}
.mc-title{font-family:'Syne',sans-serif;font-size:1.1rem;font-weight:700;margin-bottom:5px;}
.mc-sub{font-size:.78rem;opacity:.75;}

.cat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(195px,1fr));gap:11px;}
.cat-card{background:white;border:1.5px solid var(--sand);border-radius:var(--r);padding:18px 16px;cursor:pointer;transition:all .22s cubic-bezier(.34,1.56,.64,1);position:relative;overflow:hidden;}
.cat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--terracotta);transform:scaleX(0);transform-origin:left;transition:transform .2s;}
.cat-card:hover{border-color:var(--terracotta);transform:translateY(-3px);box-shadow:3px 3px 0 var(--sand);}
.cat-card:hover::before{transform:scaleX(1);}
.cat-emoji{font-size:1.8rem;margin-bottom:8px;}
.cat-name{font-family:'Syne',sans-serif;font-size:.88rem;font-weight:700;color:var(--text);margin-bottom:5px;line-height:1.3;}
.cat-cnt{font-size:.74rem;color:var(--text-muted);font-weight:500;}
.cat-prog{margin-top:10px;height:3px;background:var(--warm);border-radius:3px;overflow:hidden;}
.cat-prog-fill{height:100%;background:var(--sage);border-radius:3px;transition:width .6s;}

/* ===== QUIZ ===== */
#quiz{display:none;animation:fadeUp .3s ease;}
.quiz-header{background:white;border:1.5px solid var(--sand);border-radius:var(--r);padding:14px 20px;margin-bottom:20px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;box-shadow:2px 2px 0 var(--sand);}
.back-btn{font-family:'Syne',sans-serif;font-size:.82rem;font-weight:700;background:none;border:1.5px solid var(--sand);border-radius:var(--rsm);padding:7px 13px;cursor:pointer;color:var(--text-muted);transition:all .18s;white-space:nowrap;}
.back-btn:hover{border-color:var(--terracotta);color:var(--terracotta);}
.progress-block{flex:1;min-width:140px;}
.progress-meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:7px;}
.progress-count{font-family:'Syne',sans-serif;font-size:.85rem;font-weight:700;color:var(--text);}
.cat-badge{font-size:.7rem;font-weight:600;background:var(--warm);color:var(--terra-dark);border-radius:50px;padding:3px 10px;border:1px solid var(--sand);}
.progress-bar{height:6px;background:var(--warm);border-radius:6px;overflow:hidden;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--sage),var(--terracotta));border-radius:6px;transition:width .5s cubic-bezier(.4,0,.2,1);}
.score-display{display:flex;align-items:center;gap:6px;font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;color:var(--sage);white-space:nowrap;}
.score-dot{width:10px;height:10px;border-radius:50%;background:var(--sage);}

.qcard{background:white;border:1.5px solid var(--sand);border-radius:var(--r);padding:32px 30px;box-shadow:3px 3px 0 var(--sand);animation:slideUp .35s cubic-bezier(.34,1.56,.64,1);}
.q-meta{display:flex;align-items:center;gap:10px;margin-bottom:16px;flex-wrap:wrap;}
.q-number{font-family:'Syne',sans-serif;font-size:.7rem;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--text-muted);}
.q-source-tag{font-size:.72rem;font-weight:600;background:var(--warm);color:var(--terra-dark);border-radius:6px;padding:3px 9px;border:1px solid var(--sand);}
.q-text{font-family:'Syne',sans-serif;font-size:1.18rem;font-weight:600;line-height:1.55;margin-bottom:26px;color:var(--text);}

.opts{display:flex;flex-direction:column;gap:10px;}
.opt{padding:14px 18px;border-radius:var(--rsm);border:1.5px solid var(--sand);cursor:pointer;font-size:.91rem;font-weight:500;transition:all .18s;background:var(--cream);display:flex;align-items:flex-start;gap:12px;line-height:1.4;}
.opt-letter{width:28px;height:28px;border-radius:8px;background:var(--warm);border:1.5px solid var(--sand);display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-size:.78rem;font-weight:800;color:var(--text-muted);flex-shrink:0;transition:all .18s;margin-top:1px;}
.opt:hover:not(.disabled){border-color:var(--terracotta);background:rgba(193,114,79,.04);transform:translateX(4px);}
.opt:hover:not(.disabled) .opt-letter{background:var(--terracotta);border-color:var(--terracotta);color:white;}
.opt.correct{border-color:var(--sage);background:rgba(107,143,113,.08);}
.opt.correct .opt-letter{background:var(--sage);border-color:var(--sage);color:white;}
.opt.wrong{border-color:var(--rose);background:rgba(212,117,107,.07);}
.opt.wrong .opt-letter{background:var(--rose);border-color:var(--rose);color:white;}
.opt.disabled{cursor:default;}
.opt.disabled:not(.correct):not(.wrong){opacity:.55;}
.opt-text{flex:1;}

.feedback{margin-top:18px;border-radius:var(--rsm);padding:16px 18px;font-size:.88rem;line-height:1.65;display:none;animation:fadeIn .3s;border-left:4px solid;}
.feedback.show{display:block;}
.feedback.correct-fb{background:rgba(107,143,113,.1);border-color:var(--sage);}
.feedback.wrong-fb{background:rgba(212,175,74,.1);border-color:var(--gold);}
.fb-head{font-family:'Syne',sans-serif;font-weight:700;font-size:.92rem;margin-bottom:6px;}
.correct-fb .fb-head{color:var(--sage);}
.wrong-fb .fb-head{color:var(--gold);}

.next-btn{width:100%;padding:16px;border-radius:var(--rsm);border:none;font-family:'Syne',sans-serif;font-size:1rem;font-weight:700;cursor:pointer;background:var(--navy);color:white;margin-top:16px;display:none;transition:all .2s;box-shadow:3px 3px 0 var(--charcoal);letter-spacing:.5px;}
.next-btn:hover{transform:translateY(-2px);box-shadow:5px 5px 0 var(--charcoal);}
.next-btn:active{transform:translateY(0);box-shadow:2px 2px 0 var(--charcoal);}
.next-btn.show{display:block;animation:fadeIn .3s;}

/* ===== RESULTS ===== */
#results{display:none;animation:fadeUp .4s ease;}
.results-card{background:white;border:1.5px solid var(--sand);border-radius:var(--r);padding:40px 32px;box-shadow:4px 4px 0 var(--sand);margin-bottom:16px;text-align:center;}
.score-visual{width:160px;height:160px;margin:0 auto 28px;position:relative;}
.score-svg{transform:rotate(-90deg);}
.score-track{fill:none;stroke:var(--warm);stroke-width:10;}
.score-arc{fill:none;stroke:var(--terracotta);stroke-width:10;stroke-linecap:round;stroke-dasharray:440;stroke-dashoffset:440;transition:stroke-dashoffset 1.2s cubic-bezier(.4,0,.2,1);}
.score-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.score-pct{font-family:'Syne',sans-serif;font-size:2.2rem;font-weight:800;color:var(--text);line-height:1;}
.score-frac{font-size:.8rem;color:var(--text-muted);font-weight:500;margin-top:3px;}
.result-title{font-family:'Syne',sans-serif;font-size:1.8rem;font-weight:800;margin-bottom:8px;color:var(--text);}
.result-sub{color:var(--text-muted);font-size:.92rem;line-height:1.6;margin-bottom:28px;max-width:480px;margin-left:auto;margin-right:auto;}
.breakdown-title{font-family:'Syne',sans-serif;font-size:.7rem;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--text-muted);margin-bottom:14px;text-align:left;}
.breakdown-list{text-align:left;}
.bd-row{display:flex;align-items:center;gap:12px;margin-bottom:9px;padding:8px 12px;background:var(--cream);border-radius:8px;border:1px solid var(--warm);}
.bd-emoji{font-size:1rem;flex-shrink:0;}
.bd-name{flex:1;font-size:.8rem;font-weight:600;color:var(--text);line-height:1.3;}
.bd-bar-wrap{width:80px;height:5px;background:var(--warm);border-radius:5px;overflow:hidden;}
.bd-bar-fill{height:100%;border-radius:5px;}
.bd-score{font-size:.78rem;font-weight:700;color:var(--text-muted);width:36px;text-align:right;white-space:nowrap;}

.action-row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
.btn{padding:14px 28px;border-radius:var(--rsm);border:none;font-family:'Syne',sans-serif;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .2s;letter-spacing:.3px;}
.btn-primary{background:var(--terracotta);color:white;box-shadow:3px 3px 0 var(--terra-dark);}
.btn-primary:hover{transform:translateY(-2px);box-shadow:5px 5px 0 var(--terra-dark);}
.btn-secondary{background:white;color:var(--text);border:1.5px solid var(--sand);box-shadow:2px 2px 0 var(--sand);}
.btn-secondary:hover{transform:translateY(-2px);border-color:var(--navy);color:var(--navy);}

@keyframes fadeUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
@keyframes slideUp{from{opacity:0;transform:translateY(18px);}to{opacity:1;transform:translateY(0);}}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

@media(max-width:520px){
  .logo-text{font-size:1.8rem;}
  .mode-cards{grid-template-columns:1fr;}
  .qcard{padding:22px 18px;}
  .q-text{font-size:1rem;}
  .opt{font-size:.87rem;}
  .results-card{padding:28px 18px;}
}
</style>
</head>
<body>
<div id="app">

<!-- ===== HOME ===== -->
<div id="home">
  <div class="home-header">
    <div class="logo-wrap">
      <div class="logo-icon">üçº</div>
      <div class="logo-text">Quiz <span>CAP</span> AEPE</div>
    </div>
    <p class="tagline">R√©vise avec des questions tir√©es des fiches de cours officielles</p>
    <div class="source-chip">üìö formationcappetiteenfance.com</div>
  </div>
  <div class="stats-strip">
    <div class="stat-pill">‚úÖ <strong id="totalQ">0</strong> questions</div>
    <div class="stat-pill">üìÇ <strong id="totalCat">0</strong> th√®mes</div>
    <div class="stat-pill">üèÜ Record : <strong id="bestScore">‚Äì</strong></div>
  </div>
  <div class="section-label">Mode d'entra√Ænement</div>
  <div class="mode-cards">
    <div class="mode-card exam" onclick="startQuiz('exam')">
      <div class="mc-icon">üéì</div>
      <div class="mc-title">Examen Complet</div>
      <div class="mc-sub">Toutes les questions m√©lang√©es</div>
    </div>
    <div class="mode-card rapid" onclick="startQuiz('rapid')">
      <div class="mc-icon">‚ö°</div>
      <div class="mc-title">Session Rapide</div>
      <div class="mc-sub">20 questions al√©atoires</div>
    </div>
  </div>
  <div class="section-label" style="margin-top:28px">Par th√®me</div>
  <div class="cat-grid" id="catGrid"></div>
</div>

<!-- ===== QUIZ ===== -->
<div id="quiz">
  <div class="quiz-header">
    <button class="back-btn" onclick="goHome()">‚Üê Accueil</button>
    <div class="progress-block">
      <div class="progress-meta">
        <span class="progress-count" id="qNum">1/50</span>
        <span class="cat-badge" id="catBadge">‚Äì</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="progFill" style="width:0%"></div></div>
    </div>
    <div class="score-display"><div class="score-dot"></div><span id="scoreDisp">0</span></div>
  </div>
  <div class="qcard" id="qcard">
    <div class="q-meta">
      <span class="q-number" id="qNumInner">Question 1</span>
      <span class="q-source-tag" id="qSourceTag">‚Äì</span>
    </div>
    <div class="q-text" id="qText">‚Äì</div>
    <div class="opts" id="optsContainer"></div>
    <div class="feedback" id="feedbackEl">
      <div class="fb-head" id="fbHead"></div>
      <div id="fbBody"></div>
    </div>
    <button class="next-btn" id="nextBtn" onclick="nextQ()">Question suivante ‚Üí</button>
  </div>
</div>

<!-- ===== RESULTS ===== -->
<div id="results">
  <div class="results-card">
    <div class="score-visual">
      <svg class="score-svg" viewBox="0 0 160 160" width="160" height="160">
        <circle class="score-track" cx="80" cy="80" r="70"/>
        <circle class="score-arc" id="scoreArc" cx="80" cy="80" r="70"/>
      </svg>
      <div class="score-center">
        <div class="score-pct" id="resPct">0%</div>
        <div class="score-frac" id="resFrac">0/0</div>
      </div>
    </div>
    <div class="result-title" id="resTitle">‚Äì</div>
    <div class="result-sub" id="resSub">‚Äì</div>
    <div class="breakdown-title">R√©sultats par th√®me</div>
    <div class="breakdown-list" id="breakdown"></div>
  </div>
  <div class="action-row">
    <button class="btn btn-primary" onclick="goHome()">üè† Accueil</button>
    <button class="btn btn-secondary" id="replayBtn">üîÑ Rejouer</button>
  </div>
</div>

</div>
<script>
// ============================================================
// BASE DE QUESTIONS ‚Äî CAP AEPE
// Les options sont m√©lang√©es √† chaque partie (shuffleOptions)
// ============================================================
const QUESTIONS = [
  // === üß¨ Biologie ‚Äì Corps humain ===
  {cat:'üß¨ Biologie ‚Äì Corps humain',src:'Organisation du corps humain',
   q:'De quoi est compos√©e une cellule humaine ?',
   opts:['Membrane, cytoplasme, organites et noyau','Os, muscles et tendons','√âpiderme, derme et hypoderme','Neurones, axones et dendrites'],ans:0,
   exp:'La cellule humaine comprend la membrane cellulaire (barri√®re externe), le cytoplasme, les organites et le noyau (centre de commande contenant l\'ADN).'},
  {cat:'üß¨ Biologie ‚Äì Corps humain',src:'Organisation du corps humain',
   q:'Combien de chromosomes contient une cellule humaine normale (non sexuelle) ?',
   opts:['23 chromosomes','46 chromosomes','48 chromosomes','92 chromosomes'],ans:1,
   exp:'Toutes les cellules somatiques contiennent 46 chromosomes (23 paires). Les gam√®tes n\'en ont que 23 ; la f√©condation reconstitue les 46.'},
  {cat:'üß¨ Biologie ‚Äì Corps humain',src:'Organisation du corps humain',
   q:'Quels sont les 4 types de tissus du corps humain ?',
   opts:['√âpith√©lial, conjonctif, nerveux et musculaire','Osseux, cartilagineux, graisseux et cutan√©','Sanguin, lymphatique, digestif et respiratoire','H√©patique, r√©nal, pulmonaire et cardiaque'],ans:0,
   exp:'Les 4 types de tissus : √©pith√©lial (rev√™tement), conjonctif (soutien/nutrition), nerveux (communication) et musculaire (contraction).'},
  {cat:'üß¨ Biologie ‚Äì Corps humain',src:'Organisation du corps humain',
   q:'Quel syst√®me transporte l\'oxyg√®ne et les nutriments vers les cellules ?',
   opts:['Le syst√®me nerveux','Le syst√®me circulatoire','Le syst√®me digestif','Le syst√®me locomoteur'],ans:1,
   exp:'Le syst√®me circulatoire (c≈ìur, art√®res, veines, capillaires) transporte O2 et nutriments vers les cellules et √©vacue les d√©chets.'},
  {cat:'üß¨ Biologie ‚Äì Corps humain',src:'Organisation du corps humain',
   q:'Quels sont les deux types de division cellulaire ?',
   opts:['La mitose et la m√©iose','La fission et la fusion','La croissance et la r√©duction','L\'apoptose et la n√©crose'],ans:0,
   exp:'La mitose (toutes cellules somatiques, croissance et r√©paration) et la m√©iose (gam√®tes seulement, produit des cellules √† 23 chromosomes).'},
  {cat:'üß¨ Biologie ‚Äì Corps humain',src:'Organisation du corps humain',
   q:'Quel est le r√¥le principal du syst√®me lymphatique ?',
   opts:['Produire des globules rouges','D√©fendre l\'organisme et drainer les liquides interstitiels','Dig√©rer les graisses alimentaires','R√©guler la glyc√©mie'],ans:1,
   exp:'Le syst√®me lymphatique draine les liquides entre les cellules et joue un r√¥le central dans l\'immunit√© en transportant les lymphocytes.'},

  // === üß¨ Biologie ‚Äì La peau ===
  {cat:'üß¨ Biologie ‚Äì La peau',src:'La peau',
   q:'De quelles 3 couches est compos√©e la peau ?',
   opts:['√âpiderme, derme et hypoderme','√âpiderme, muqueuse et derme','K√©ratine, m√©lanine et collag√®ne','Cuticule, derme et tissu profond'],ans:0,
   exp:'√âpiderme (protection externe), derme (tissu vascularis√© de soutien) et hypoderme (tissu adipeux profond).'},
  {cat:'üß¨ Biologie ‚Äì La peau',src:'La peau',
   q:'Quel est le r√¥le principal de la m√©lanine dans l\'√©piderme ?',
   opts:['Nourrir les k√©ratinocytes','Absorber les UV et donner la couleur √† la peau','Imperm√©abiliser la peau','D√©clencher la cicatrisation'],ans:1,
   exp:'La m√©lanine (produite par les m√©lanocytes) absorbe les UV, donne la couleur √† la peau et la prot√®ge des dommages solaires.'},
  {cat:'üß¨ Biologie ‚Äì La peau',src:'La peau',
   q:'Quelle prot√©ine produite par les k√©ratinocytes assure l\'imperm√©abilit√© de la peau ?',
   opts:['La m√©lanine','Le collag√®ne','La k√©ratine','L\'√©lastine'],ans:2,
   exp:'La k√©ratine est une prot√©ine insoluble qui imperm√©abilise la peau et la prot√®ge contre les agressions m√©caniques et la perte en eau.'},
  {cat:'üß¨ Biologie ‚Äì La peau',src:'La peau',
   q:'Quelle couche de la peau constitue la r√©serve √©nerg√©tique et isole thermiquement ?',
   opts:['L\'√©piderme','Le derme','L\'hypoderme','La couche corn√©e'],ans:2,
   exp:'L\'hypoderme, compos√© principalement de tissu adipeux, constitue la r√©serve d\'√©nergie et assure l\'isolation thermique du corps.'},
  {cat:'üß¨ Biologie ‚Äì La peau',src:'La peau',
   q:'Quel est le principal ennemi de la peau √† prot√©ger chez l\'enfant ?',
   opts:['L\'eau du robinet','Le soleil (UV)','Le vent','Le froid uniquement'],ans:1,
   exp:'Le soleil est le principal agresseur de la peau. Les coups de soleil r√©p√©t√©s d√®s l\'enfance augmentent le risque de m√©lanome. Protection solaire et r√®gles d\'hygi√®ne doivent √™tre enseign√©es d√®s le plus jeune √¢ge.'},

  // === üß¨ Biologie ‚Äì Micro-organismes ===
  {cat:'üß¨ Biologie ‚Äì Micro-organismes',src:'Pouvoir pathog√®ne',
   q:'Qu\'est-ce qu\'un micro-organisme pathog√®ne ?',
   opts:['Un micro-organisme inoffensif de la flore intestinale','Un micro-organisme nocif capable de provoquer des maladies','Un micro-organisme visible √† l\'≈ìil nu','Un micro-organisme b√©n√©fique pour la digestion'],ans:1,
   exp:'Un micro-organisme pathog√®ne est nocif et peut provoquer des maladies, parfois graves. Il se distingue des micro-organismes inoffensifs ou b√©n√©fiques.'},
  {cat:'üß¨ Biologie ‚Äì Micro-organismes',src:'Pouvoir pathog√®ne',
   q:'Quelle est la caract√©ristique principale des bact√©ries ?',
   opts:['Organismes pluricellulaires avec noyau d√©limit√©','Organismes unicellulaires procaryotes (sans noyau)','Virus de grande taille','Champignons microscopiques √† membrane nucl√©aire'],ans:1,
   exp:'Les bact√©ries sont unicellulaires et procaryotes : leur ADN flotte directement dans le cytoplasme, sans noyau d√©limit√© par une membrane.'},
  {cat:'üß¨ Biologie ‚Äì Micro-organismes',src:'Pouvoir pathog√®ne',
   q:'Un virus peut-il se reproduire sans cellule h√¥te vivante ?',
   opts:['Oui, dans n\'importe quel milieu humide','Non, il ne se reproduit qu\'√† l\'int√©rieur d\'une cellule h√¥te','Oui, mais seulement √† 37¬∞C','Oui, en milieu ana√©robie'],ans:1,
   exp:'Le virus est un parasite intracellulaire obligatoire : sans cellule h√¥te, il n\'a aucune activit√© m√©tabolique et ne peut pas se reproduire.'},
  {cat:'üß¨ Biologie ‚Äì Micro-organismes',src:'Pouvoir pathog√®ne',
   q:'Quelle infection est caus√©e par le champignon Candida albicans chez le nourrisson ?',
   opts:['La rougeole','La varicelle','Le muguet buccal','La scarlatine'],ans:2,
   exp:'Le muguet buccal est une infection fongique due √† Candida albicans, fr√©quente chez le nourrisson. Points blancs sur la muqueuse, succion douloureuse, traitement antifongique.'},
  {cat:'üß¨ Biologie ‚Äì Micro-organismes',src:'Pouvoir pathog√®ne',
   q:'Quelle maladie est caus√©e par le protozoaire parasite Plasmodium ?',
   opts:['La grippe saisonni√®re','Le paludisme (malaria)','La rougeole','La tuberculose'],ans:1,
   exp:'Plasmodium, transmis par la piq√ªre du moustique Anoph√®le, cause le paludisme. C\'est une des maladies parasitaires les plus meurtri√®res au monde.'},
  {cat:'üß¨ Biologie ‚Äì Micro-organismes',src:'Pouvoir pathog√®ne',
   q:'Quelle diff√©rence entre une endotoxine et une exotoxine ?',
   opts:['Endotoxines = lib√©r√©es √† la destruction des bact√©ries ; exotoxines = s√©cr√©t√©es par des bact√©ries vivantes','Elles ont exactement le m√™me mode d\'action','Les endotoxines sont syst√©matiquement plus virulentes','Les exotoxines ne provoquent jamais de maladie'],ans:0,
   exp:'Endotoxines : dans la membrane bact√©rienne, lib√©r√©es √† la mort de la bact√©rie (choc septique possible). Exotoxines : s√©cr√©t√©es par des bact√©ries vivantes, tr√®s virulentes, servent √† fabriquer certains vaccins (anti-t√©tanique).'},

  // === üß¨ Biologie ‚Äì D√©fense de l'organisme ===
  {cat:'üß¨ Biologie ‚Äì D√©fense de l\'organisme',src:'D√©fense de l\'organisme',
   q:'Qu\'est-ce que l\'immunit√© inn√©e (non sp√©cifique) ?',
   opts:['La m√©moire immunitaire contre des agents d√©j√† rencontr√©s','La 1√®re ligne de d√©fense qui r√©agit contre tout agent sans distinction','Les anticorps produits par les lymphocytes B','La r√©ponse g√©n√©r√©e apr√®s vaccination'],ans:1,
   exp:'L\'immunit√© inn√©e est imm√©diate et non sp√©cifique. Elle agit contre tout agent √©tranger sans distinction : peau, muqueuses, mucus, phagocytose, cellules NK.'},
  {cat:'üß¨ Biologie ‚Äì D√©fense de l\'organisme',src:'D√©fense de l\'organisme',
   q:'Qu\'est-ce que la phagocytose ?',
   opts:['La production d\'anticorps sp√©cifiques par les B','La destruction directe des cellules canc√©reuses','L\'ingestion et la digestion des pathog√®nes par des cellules phagocytaires','La vaccination contre les bact√©ries'],ans:2,
   exp:'Des cellules phagocytaires (macrophages, neutrophiles) migrent vers une l√©sion, ing√®rent et dig√®rent les agents pathog√®nes : c\'est la phagocytose, m√©canisme cl√© de l\'immunit√© inn√©e.'},
  {cat:'üß¨ Biologie ‚Äì D√©fense de l\'organisme',src:'D√©fense de l\'organisme',
   q:'Quel r√¥le jouent les lymphocytes B dans l\'immunit√© adaptative ?',
   opts:['D√©truire directement les virus par contact physique','Synth√©tiser des anticorps sp√©cifiques contre des antig√®nes','D√©clencher la r√©action inflammatoire locale','Produire des globules rouges en cas d\'an√©mie'],ans:1,
   exp:'Les lymphocytes B synth√©tisent des anticorps sp√©cifiques contre un antig√®ne particulier. Les lymphocytes T coordonnent la r√©ponse et d√©truisent les cellules infect√©es.'},
  {cat:'üß¨ Biologie ‚Äì D√©fense de l\'organisme',src:'D√©fense de l\'organisme',
   q:'Comment fonctionne un vaccin pour prot√©ger l\'organisme ?',
   opts:['Il d√©truit directement les bact√©ries pr√©sentes','Il injecte un antig√®ne inactiv√© pour cr√©er une m√©moire immunitaire','Il renforce la musculature','Il aide le foie √† d√©toxifier l\'organisme'],ans:1,
   exp:'Le vaccin injecte un antig√®ne inactiv√© ou att√©nu√©. L\'organisme produit les anticorps correspondants et garde une m√©moire immunitaire pour r√©agir vite si le vrai pathog√®ne se pr√©sente.'},
  {cat:'üß¨ Biologie ‚Äì D√©fense de l\'organisme',src:'D√©fense de l\'organisme',
   q:'Quel est le r√¥le du mucus des muqueuses dans la d√©fense ?',
   opts:['Nourrir les cellules muqueuses en profondeur','Pi√©ger et neutraliser les agents pathog√®nes','Produire des anticorps locaux','R√©guler la temp√©rature corporelle'],ans:1,
   exp:'Le mucus produit par les muqueuses (voies respiratoires, digestives, g√©nitales) pi√®ge les agents pathog√®nes et peut les neutraliser ‚Äî barri√®re physico-chimique de l\'immunit√© inn√©e.'},

  // === ü•ó Nutrition ‚Äì Besoins nutritionnels ===
  {cat:'ü•ó Nutrition ‚Äì Besoins nutritionnels',src:'Les besoins nutritionnels',
   q:'Quels sont les 3 macronutriments √©nerg√©tiques essentiels ?',
   opts:['Vitamines, min√©raux et eau','Prot√©ines, glucides et lipides','Fibres, glucides et vitamines','Calcium, fer et phosphore'],ans:1,
   exp:'Les 3 macronutriments : prot√©ines (construction tissus), glucides (√©nergie rapide) et lipides (√©nergie et fonctions structurales).'},
  {cat:'ü•ó Nutrition ‚Äì Besoins nutritionnels',src:'Les besoins nutritionnels',
   q:'Quelle est la principale source d\'√©nergie du corps et du cerveau ?',
   opts:['Les lipides alimentaires','Les prot√©ines animales','Les glucides (glucose)','Les vitamines hydrosolubles'],ans:2,
   exp:'Les glucides fournissent du glucose, √©nergie principale des cellules. Le cerveau fonctionne essentiellement au glucose et ne peut pas utiliser directement les acides gras.'},
  {cat:'ü•ó Nutrition ‚Äì Besoins nutritionnels',src:'Les besoins nutritionnels',
   q:'Quelle est la diff√©rence entre glucides simples et glucides complexes ?',
   opts:['Les simples ont une saveur sucr√©e (lactose, fructose, saccharose), les complexes n\'en ont pas (c√©r√©ales, riz, p√¢tes)','Les simples sont toujours plus sains','Aucune diff√©rence nutritionnelle','Les complexes ont une saveur sucr√©e prononc√©e'],ans:0,
   exp:'Glucides simples : saveur sucr√©e (lactose, fructose, saccharose). Glucides complexes : sans go√ªt sucr√©, digestion plus lente (c√©r√©ales, p√¢tes, riz, l√©gumineuses).'},
  {cat:'ü•ó Nutrition ‚Äì Besoins nutritionnels',src:'Les besoins nutritionnels',
   q:'Quelles vitamines sont liposolubles et peuvent √™tre stock√©es dans l\'organisme ?',
   opts:['Vitamines B et C','Vitamines A, D, E et K','Vitamines B1, B6, B9 et C','Toutes les vitamines le sont'],ans:1,
   exp:'Vitamines liposolubles (A, D, E, K) : stock√©es dans l\'organisme. Vitamines hydrosolubles (B1‚ÜíB12, C) : non stock√©es, √©limin√©es dans l\'urine si exc√®s.'},
  {cat:'ü•ó Nutrition ‚Äì Besoins nutritionnels',src:'Les besoins nutritionnels',
   q:'Combien de groupes d\'aliments composent une alimentation √©quilibr√©e ?',
   opts:['3 groupes','4 groupes','6 groupes','8 groupes'],ans:2,
   exp:'6 groupes : produits laitiers, viandes/poissons/≈ìufs, f√©culents, v√©g√©taux frais, corps gras et produits sucr√©s.'},
  {cat:'ü•ó Nutrition ‚Äì Besoins nutritionnels',src:'Les besoins nutritionnels',
   q:'Quel min√©ral est essentiel √† la solidit√© des os et des dents chez l\'enfant ?',
   opts:['Le fer','Le magn√©sium','Le calcium','Le zinc'],ans:2,
   exp:'Le calcium est le min√©ral cl√© de la solidit√© osseuse et dentaire, particuli√®rement important pendant la croissance. Principal source : produits laitiers.'},

  // === üçº Nutrition ‚Äì Alimentation lact√©e ===
  {cat:'üçº Nutrition ‚Äì Alimentation lact√©e',src:'Alimentation lact√©e',
   q:'Jusqu\'√† quel √¢ge l\'alimentation est-elle exclusivement lact√©e ?',
   opts:['2 mois','4 mois','4 √† 6 mois','12 mois'],ans:2,
   exp:'De 0 √† 4-6 mois, alimentation exclusivement lact√©e. Le syst√®me digestif immature ne peut traiter les prot√©ines d\'autres aliments sans risque d\'allergie.'},
  {cat:'üçº Nutrition ‚Äì Alimentation lact√©e',src:'Alimentation lact√©e',
   q:'Quel est l\'avantage principal du lait maternel par rapport au lait infantile ?',
   opts:['Il co√ªte moins cher et se conserve mieux','Il s\'adapte aux besoins du b√©b√© et apporte les anticorps maternels','Il est plus riche en vitamine D','Il est plus visqueux et donc plus rassasiant'],ans:1,
   exp:'Le lait maternel s\'adapte en temps r√©el aux besoins du b√©b√© et lui transmet les anticorps maternels pour se d√©fendre contre les infections.'},
  {cat:'üçº Nutrition ‚Äì Alimentation lact√©e',src:'Alimentation lact√©e',
   q:'Quelle est la r√®gle d\'Appert pour calculer la ration lact√©e ?',
   opts:['Poids √ó 10 + 250 = ml/jour','Poids (en g) √∑ 10 + 250 = ml/jour','Poids √ó 100 = ml/jour','√Çge en semaines √ó 30 = ml/jour'],ans:1,
   exp:'R√®gle d\'Appert : Poids (en grammes) √∑ 10 + 250 = quantit√© totale de lait par jour en ml. Rep√®re indicatif √† adapter selon l\'app√©tit et l\'avis m√©dical.'},
  {cat:'üçº Nutrition ‚Äì Alimentation lact√©e',src:'Alimentation lact√©e',
   q:'Quel lait est recommand√© entre 4-6 mois et 12 mois ?',
   opts:['Lait 1er √¢ge','Lait 2√®me √¢ge','Lait de croissance','Lait de vache entier'],ans:1,
   exp:'Le lait 2√®me √¢ge est adapt√© entre 4-6 mois et 12 mois. Le lait reste essentiel : calcium, prot√©ines, iode, vitamines B12 et D.'},
  {cat:'üçº Nutrition ‚Äì Alimentation lact√©e',src:'Alimentation lact√©e',
   q:'√Ä partir de quel √¢ge la diversification alimentaire peut-elle d√©buter ?',
   opts:['2 mois','4 mois','6 mois','12 mois'],ans:2,
   exp:'La diversification commence √† 6 mois pour √©viter troubles digestifs et allergies. On commence par les fromages, yaourts, puis l√©gumes et fruits.'},
  {cat:'üçº Nutrition ‚Äì Alimentation lact√©e',src:'Alimentation lact√©e',
   q:'Comment v√©rifier la temp√©rature d\'un biberon avant de le donner au b√©b√© ?',
   opts:['En le go√ªtant avec une cuill√®re','En versant quelques gouttes sur la face interne du poignet','En observant si de la vapeur se d√©gage','Avec un thermom√®tre de cuisine'],ans:1,
   exp:'On verse quelques gouttes sur la face interne du poignet (zone tr√®s sensible). Le lait doit √™tre ti√®de (~37¬∞C), jamais br√ªlant.'},

  // === üè• SMS ‚Äì Maladies infectieuses ===
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'La varicelle est caus√©e par quel agent ?',
   opts:['Le paramyxovirus (rougeole)','Le virus varicelle-zona (VZV)','Le rotavirus','Le streptocoque groupe A'],ans:1,
   exp:'La varicelle est due au VZV (virus varicelle-zona). Ce virus peut rester latent et r√©appara√Ætre √† l\'√¢ge adulte sous forme de zona. Contagiosit√© : 2-4 jours avant l\'√©ruption jusqu\'√† 5-7 jours apr√®s.'},
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'Quelle maladie √©ruptive est d\'origine BACT√âRIENNE ?',
   opts:['La varicelle','La rougeole','La rub√©ole','La scarlatine'],ans:3,
   exp:'La scarlatine est la seule maladie √©ruptive bact√©rienne (streptocoque groupe A). Les autres (varicelle, rougeole, rub√©ole) sont virales ‚Äî les antibiotiques n\'y sont pas efficaces.'},
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'Quels sympt√¥mes caract√©risent la rougeole ?',
   opts:['Gonflement uniquement derri√®re les oreilles','√âruption d√©butant par le visage, fi√®vre 39-40¬∞C, larmoiements, toux','Petites v√©sicules prurigineuses sur tout le corps','Toux aboyante nocturne uniquement'],ans:1,
   exp:'La rougeole est tr√®s contagieuse : √©ruption qui d√©bute au visage, fi√®vre 39-40¬∞C, larmoiements, √©coulement nasal et toux. Complications possibles : otite, pneumonie, enc√©phalite.'},
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'Quel est le meilleur moyen de pr√©vention contre les maladies infectieuses ?',
   opts:['Le lavage des mains seul','La vaccination','Les antibiotiques en traitement pr√©ventif','L\'isolement permanent de l\'enfant'],ans:1,
   exp:'La vaccination reste le meilleur moyen de pr√©vention collective. Elle √©vite maladies graves, √©pid√©mies et complications. Les professionnels informent et sensibilisent les familles.'},
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'La coqueluche est caus√©e par quelle bact√©rie ?',
   opts:['Le streptocoque Œ≤-h√©molytique','Le staphylocoque dor√©','La Bordetella pertussis','Le m√©ningocoque'],ans:2,
   exp:'Bordetella pertussis provoque des quintes de toux avec inspirations sifflantes et vomissements. Gravissime chez le nourrisson non vaccin√©.'},
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'Combien de jours avant la parotide les oreillons sont-ils d√©j√† contagieux ?',
   opts:['1 jour','3 jours','7 jours','14 jours'],ans:2,
   exp:'La contagiosit√© d√©bute 7 jours avant l\'apparition de la parotide et se prolonge jusqu\'√† 9 jours apr√®s.'},
  {cat:'üè• SMS ‚Äì Maladies infectieuses',src:'Maladies infectieuses',
   q:'Quelle complication grave peut causer la rub√©ole chez une femme enceinte non immunis√©e ?',
   opts:['Un ict√®re n√©onatal','Des malformations cong√©nitales graves du f≈ìtus','Une pneumonie n√©onatale','Une allergie alimentaire grave'],ans:1,
   exp:'La rub√©ole, b√©nigne chez l\'enfant, est tr√®s dangereuse pour une femme enceinte non immunis√©e : malformations cong√©nitales cardiaques, oculaires et auditives, surtout au 1er trimestre.'},

  // === üß¥ SMS ‚Äì Affections peau & muqueuses ===
  {cat:'üß¥ SMS ‚Äì Affections peau & muqueuses',src:'Affections peau et muqueuses',
   q:'L\'√©ryth√®me fessier est-il contagieux ?',
   opts:['Oui, tr√®s contagieux en collectivit√©','Oui, mod√©r√©ment par contact direct','Non, pas du tout contagieux','Seulement s\'il est d\'origine bact√©rienne'],ans:2,
   exp:'L\'√©ryth√®me fessier (dermite du si√®ge) est une dermatose b√©nigne NON contagieuse, caus√©e par contact prolong√© avec une couche souill√©e. Traitement : hygi√®ne rigoureuse et cr√®me protectrice.'},
  {cat:'üß¥ SMS ‚Äì Affections peau & muqueuses',src:'Affections peau et muqueuses',
   q:'O√π se localise l\'ecz√©ma chez l\'enfant ?',
   opts:['Sur le cuir chevelu uniquement','Sur les fesses et le dos','Sur le visage et les plis d\'articulation (coudes, poignets, genoux)','Sur les pieds uniquement'],ans:2,
   exp:'L\'ecz√©ma (non contagieux, souvent allergique) se localise au visage et aux plis d\'articulation. Plaques rouges ‚Üí v√©sicules suintantes ‚Üí cro√ªtes.'},
  {cat:'üß¥ SMS ‚Äì Affections peau & muqueuses',src:'Affections peau et muqueuses',
   q:'L\'imp√©tigo : quelle origine et quel niveau de contagiosit√© ?',
   opts:['Non contagieux, d\'origine virale','Tr√®s contagieux, d\'origine bact√©rienne (streptocoque ou staphylocoque)','Peu contagieux, d\'origine allergique','Non contagieux, d\'origine parasitaire'],ans:1,
   exp:'L\'imp√©tigo est tr√®s contagieux et bact√©rien (streptocoque ou staphylocoque). Bulles ‚Üí cro√ªtes suintantes. Traitement antibiotique n√©cessaire.'},
  {cat:'üß¥ SMS ‚Äì Affections peau & muqueuses',src:'Affections peau et muqueuses',
   q:'Qu\'est-ce que la conjonctivite et comment se manifeste-t-elle ?',
   opts:['Une infection de l\'oreille interne','Une infection tr√®s contagieuse de la conjonctive avec yeux rouges et √©coulement','Une maladie de peau √† streptocoque','Une infection intestinale bact√©rienne'],ans:1,
   exp:'Infection contagieuse de la conjonctive (bact√©rienne ou virale). Yeux et paupi√®res rouges, larmoiements, photophobie, √©coulement purulent.'},
  {cat:'üß¥ SMS ‚Äì Affections peau & muqueuses',src:'Affections peau et muqueuses',
   q:'Qu\'est-ce que le muguet buccal ?',
   opts:['Une infection virale des gencives','Une infection par Candida albicans de la muqueuse buccale, surtout chez le nourrisson','Une inflammation des dents de lait','Une maladie h√©r√©ditaire des muqueuses'],ans:1,
   exp:'Le muguet est une infection fongique (Candida albicans) de la muqueuse buccale, fr√©quente chez le nourrisson. Points blancs, succion douloureuse. Traitement antifongique.'},

  // === ü¶† SMS ‚Äì Parasitoses ===
  {cat:'ü¶† SMS ‚Äì Parasitoses',src:'Parasitoses',
   q:'Qu\'est-ce que la p√©diculose ?',
   opts:['Une infestation par des oxyures intestinaux','Une infestation du cuir chevelu par des poux (Pediculus capitis)','Une dermatose bact√©rienne du cuir chevelu','Une allergie aux acariens'],ans:1,
   exp:'La p√©diculose est une parasitose caus√©e par les poux de t√™te. Tr√®s contagieuse en collectivit√©, elle provoque des d√©mangeaisons intenses.'},
  {cat:'ü¶† SMS ‚Äì Parasitoses',src:'Parasitoses',
   q:'La pr√©sence de poux indique-t-elle un manque d\'hygi√®ne ?',
   opts:['Oui, c\'est l\'indicateur principal d\'une hygi√®ne insuffisante','Non, tout enfant peut attraper des poux quelle que soit sa propret√©','Oui, surtout dans les familles d√©favoris√©es','Seulement en cas de r√©infestation r√©p√©t√©e'],ans:1,
   exp:'La pr√©sence de poux N\'INDIQUE PAS un manque d\'hygi√®ne. Les poux pr√©f√®rent m√™me les cheveux propres. Tout enfant peut en attraper. √âviter tout jugement, r√©conforter la famille.'},
  {cat:'ü¶† SMS ‚Äì Parasitoses',src:'Parasitoses',
   q:'Qu\'est-ce que l\'oxyurose et quel est son principal sympt√¥me ?',
   opts:['Une infection du cuir chevelu','Une parasitose digestive avec prurit anal, surtout la nuit','Une maladie respiratoire par acariens','Une infection urinaire parasitaire'],ans:1,
   exp:'L\'oxyurose est due aux oxyures (Enterobius vermicularis), petits vers blancs du gros intestin. Sympt√¥me cl√© : prurit anal nocturne.'},
  {cat:'ü¶† SMS ‚Äì Parasitoses',src:'Parasitoses',
   q:'Pourquoi les oxyures r√©cidivent-ils souvent apr√®s traitement ?',
   opts:['Le traitement est peu efficace','Les ≈ìufs sous les ongles r√©infestent quand les mains touchent la bouche','Ils se transmettent dans l\'air','Ils proviennent des animaux domestiques'],ans:1,
   exp:'Les ≈ìufs d\'oxyures se fixent sous les ongles. Si les mains touchent la bouche, l\'enfant se r√©infeste. D\'o√π l\'importance cruciale du lavage des mains apr√®s chaque passage aux toilettes.'},

  // === üìã EP1 ‚Äì Posture professionnelle ===
  {cat:'üìã EP1 ‚Äì Posture professionnelle',src:'Responsabilit√© civile et p√©nale',
   q:'Qu\'est-ce que la responsabilit√© civile d\'un professionnel de la petite enfance ?',
   opts:['L\'obligation l√©gale de signaler les maltraitances','L\'obligation de r√©parer les dommages caus√©s dans l\'exercice de ses fonctions','Le respect absolu du secret professionnel','L\'obligation de se former en continu'],ans:1,
   exp:'La responsabilit√© civile engage le professionnel (ou son employeur) √† r√©parer les pr√©judices caus√©s. Distincte de la responsabilit√© p√©nale (sanctions p√©nales : prison, amende).'},
  {cat:'üìã EP1 ‚Äì Posture professionnelle',src:'Secret professionnel',
   q:'Que signifie concr√®tement le secret professionnel pour un professionnel AEPE ?',
   opts:['Ne jamais parler aux parents','Garder confidentielles les informations sur l\'enfant et sa famille, sauf d√©rogations l√©gales','Ne pas communiquer avec les coll√®gues','Refuser de r√©pondre aux m√©decins'],ans:1,
   exp:'Secret professionnel : confidentialit√© des informations obtenues dans l\'exercice des fonctions. D√©rogations l√©gales notamment pour signaler les situations de maltraitance (art. 226-14 Code p√©nal).'},
  {cat:'üìã EP1 ‚Äì Posture professionnelle',src:'Droits de l\'enfant',
   q:'En quelle ann√©e la Convention Internationale des Droits de l\'Enfant a-t-elle √©t√© adopt√©e par l\'ONU ?',
   opts:['1959','1979','1989','1999'],ans:2,
   exp:'La CIDE a √©t√© adopt√©e le 20 novembre 1989 et ratifi√©e par la France en 1990. 4 principes fondamentaux : non-discrimination, int√©r√™t sup√©rieur, droit √† la vie et au d√©veloppement, participation.'},
  {cat:'üìã EP1 ‚Äì Posture professionnelle',src:'Principe de la√Øcit√©',
   q:'Que signifie la la√Øcit√© dans un EAJE ?',
   opts:['Imposer la culture fran√ßaise √† tous','Interdire toute f√™te et c√©l√©bration','Garantir la neutralit√© religieuse et l\'√©galit√© de traitement de tous les enfants','Refuser les enfants d\'autres origines'],ans:2,
   exp:'La la√Øcit√© impose la neutralit√© religieuse. En EAJE : accueil de tous sans discrimination, pas de pr√©f√©rences religieuses affich√©es, respect de toutes les familles.'},
  {cat:'üìã EP1 ‚Äì Bientraitance',src:'La bientraitance',
   q:'Qu\'est-ce que la bientraitance ?',
   opts:['Interdire tout conflit entre enfants','Une d√©marche active visant le bien-√™tre de l\'enfant en respectant ses droits et sa dignit√©','Ne jamais poser de limites','Satisfaire imm√©diatement toutes les demandes de l\'enfant'],ans:1,
   exp:'La bientraitance est une d√©marche positive visant le bien-√™tre et le d√©veloppement de l\'enfant, en respectant ses droits, ses besoins et sa dignit√©. Elle inclut la pr√©vention de la maltraitance.'},
  {cat:'üìã EP1 ‚Äì Bientraitance',src:'La bientraitance',
   q:'Qu\'est-ce qu\'un PAI (Projet d\'Accueil Individualis√©) ?',
   opts:['Le planning hebdomadaire de l\'√©quipe','Un document pour un enfant ayant des besoins sp√©cifiques (allergie, maladie chronique)','Le projet p√©dagogique de la structure','Le dossier d\'inscription et de facturation'],ans:1,
   exp:'Le PAI est un document √©labor√© avec la famille, le m√©decin et la structure pour les enfants atteints de maladies chroniques, d\'allergies ou de handicaps. Il pr√©cise les am√©nagements et mesures d\'urgence.'},
  {cat:'üìã EP1 ‚Äì Soins quotidiens',src:'Mort inattendue du nourrisson',
   q:'Quelle est la position recommand√©e pour pr√©venir la mort inattendue du nourrisson ?',
   opts:['Sur le ventre pour favoriser le transit','Sur le c√¥t√© pour √©viter les r√©gurgitations','Sur le dos dans un lit rigide sans objets mous','En position semi-assise √† 45¬∞'],ans:2,
   exp:'Coucher sur le dos dans un lit rigide adapt√©, √† bonne temp√©rature, sans peluches ni coussins. Cette pratique a fait chuter consid√©rablement les d√©c√®s par mort inattendue du nourrisson.'},
  {cat:'üìã EP1 ‚Äì Soins quotidiens',src:'Le change',
   q:'Dans quel sens nettoyer les fesses d\'une petite fille lors du change ?',
   opts:['De l\'arri√®re vers l\'avant (anus ‚Üí vulve)','De l\'avant vers l\'arri√®re (vulve ‚Üí anus)','En cercles du centre vers l\'ext√©rieur','Dans n\'importe quel sens avec une lingette'],ans:1,
   exp:'Toujours de l\'avant vers l\'arri√®re (vulve ‚Üí anus) pour √©viter de contaminer l\'ur√®tre avec des bact√©ries f√©cales et pr√©venir les infections urinaires.'},

  // === üìã EP2 ‚Äì Accueil collectif ===
  {cat:'üìã EP2 ‚Äì Accueil collectif',src:'Acquisition du langage',
   q:'Vers quel √¢ge apparaissent les premiers mots chez un enfant √† d√©veloppement typique ?',
   opts:['3-4 mois','6-8 mois','10-14 mois','18-24 mois'],ans:2,
   exp:'Premiers mots : g√©n√©ralement 10-14 mois. Babillage : 6-9 mois. Association 2 mots : 18-24 mois. Petites phrases : vers 3 ans.'},
  {cat:'üìã EP2 ‚Äì Accueil collectif',src:'Entretien du linge',
   q:'Que signifie un triangle sur l\'√©tiquette d\'un v√™tement ?',
   opts:['Ne pas repasser','Instructions de s√©chage en tambour','Instructions de blanchiment','Lavage √† la main seulement'],ans:2,
   exp:'Le triangle indique le blanchiment. Triangle vide = autoris√©. Triangle avec 2 lignes = sans chlore seulement. Triangle barr√© = aucun blanchiment.'},
  {cat:'üìã EP2 ‚Äì Accueil collectif',src:'Techniques de nettoyage',
   q:'Quelle est la diff√©rence entre nettoyage et d√©sinfection ?',
   opts:['Termes synonymes','Le nettoyage enl√®ve les salet√©s visibles, la d√©sinfection tue les micro-organismes pathog√®nes','Le nettoyage tue les microbes, la d√©sinfection nettoie','La d√©sinfection est r√©serv√©e aux h√¥pitaux'],ans:1,
   exp:'Le nettoyage enl√®ve les souillures visibles. La d√©sinfection d√©truit les micro-organismes pathog√®nes. Ces deux √©tapes sont compl√©mentaires et toujours r√©alis√©es dans cet ordre.'},
  {cat:'üìã EP2 ‚Äì Accueil collectif',src:'Am√©nagement de l\'espace',
   q:'Pourquoi le coin repos doit-il √™tre s√©par√© du coin jeux en cr√®che ?',
   opts:['Pour des raisons esth√©tiques','Pour respecter le rythme de l\'enfant et lui permettre un vrai repos sans stimulations','Pour √©viter que les jouets se salissent','Pour faciliter la surveillance'],ans:1,
   exp:'L\'enfant doit pouvoir dormir dans un espace calme, s√©par√© du bruit. Respecter le rythme individuel de sommeil est un principe fondamental de bientraitance.'},

  // === üìã EP3 ‚Äì Accueil individuel ===
  {cat:'üìã EP3 ‚Äì Accueil individuel',src:'L\'√©quilibre alimentaire',
   q:'Combien de prises alimentaires un enfant de 1 √† 3 ans a-t-il besoin par jour ?',
   opts:['2 repas principaux','3 repas sans collation','4 √† 5 prises (3 repas + 1-2 collations)','6 repas r√©partis toutes les 3 heures'],ans:2,
   exp:'4 √† 5 prises/jour : petit-d√©jeuner, d√©jeuner, go√ªter, d√Æner (+√©ventuellement un 2e petit-d√©jeuner). Le go√ªter couvre les besoins √©nerg√©tiques de croissance.'},
  {cat:'üìã EP3 ‚Äì Accueil individuel',src:'Allergies et intol√©rances',
   q:'Quelle est la diff√©rence entre allergie et intol√©rance alimentaire ?',
   opts:['Ce sont des synonymes','L\'allergie implique une r√©action immunitaire (pouvant √™tre grave), l\'intol√©rance ne mobilise pas le syst√®me immunitaire','L\'allergie ne concerne que les nourrissons','L\'intol√©rance est toujours plus grave'],ans:1,
   exp:'Allergie alimentaire : r√©ponse immunitaire (IgE), risque de choc anaphylactique. Intol√©rance (ex : au lactose) : pas de r√©action immunitaire, troubles digestifs surtout.'},
  {cat:'üìã EP3 ‚Äì Accueil individuel',src:'Produits toxicologiques',
   q:'Que faire si un enfant ing√®re un produit toxique (eau de Javel, produit m√©nager) ?',
   opts:['Faire vomir imm√©diatement','Donner beaucoup d\'eau pour diluer','Appeler le 15 ou le Centre Antipoison (0800 59 59 59), ne jamais faire vomir','Attendre les sympt√¥mes avant d\'agir'],ans:2,
   exp:'Ne JAMAIS faire vomir (br√ªlures √† la remont√©e). Appeler imm√©diatement le 15 ou le Centre Antipoison. Garder le produit pour donner les informations exactes.'},
  {cat:'üìã EP3 ‚Äì Accueil individuel',src:'L\'entretien du r√©frig√©rateur',
   q:'√Ä quelle temp√©rature doit fonctionner un r√©frig√©rateur pour conserver les aliments en s√©curit√© ?',
   opts:['Entre 0¬∞C et 4¬∞C','Entre 5¬∞C et 8¬∞C','Entre 10¬∞C et 12¬∞C','En dessous de -5¬∞C'],ans:0,
   exp:'Entre 0¬∞C et 4¬∞C (id√©alement 4¬∞C) pour ralentir la prolif√©ration bact√©rienne. Au-del√† de 4¬∞C, les bact√©ries se multiplient rapidement. V√©rifier r√©guli√®rement avec un thermom√®tre.'},

  // === üß¨ Biologie ‚Äì Circulation sanguine ===
  {cat:'üß¨ Biologie ‚Äì Circulation sanguine',src:'Circulation sanguine',
   q:'Quel est le r√¥le des globules rouges ?',
   opts:['D√©fendre l\'organisme contre les infections','Transporter l\'oxyg√®ne des poumons vers les cellules gr√¢ce √† l\'h√©moglobine','Produire les anticorps','Assurer la coagulation'],ans:1,
   exp:'Les h√©maties (globules rouges) contiennent l\'h√©moglobine qui fixe l\'O2 dans les poumons et le transporte vers les cellules. Ils transportent aussi le CO2 en sens inverse.'},
  {cat:'üß¨ Biologie ‚Äì Circulation sanguine',src:'Circulation sanguine',
   q:'Quel est le r√¥le des globules blancs (leucocytes) ?',
   opts:['Transporter l\'oxyg√®ne','Assurer la coagulation sanguine','D√©fendre l\'organisme contre les agents infectieux','R√©guler la glyc√©mie'],ans:2,
   exp:'Les leucocytes assurent la d√©fense immunitaire : identification et √©limination des agents infectieux. Plusieurs types : neutrophiles, lymphocytes, monocytes, √©osinophiles.'},
  {cat:'üß¨ Biologie ‚Äì Circulation sanguine',src:'Circulation sanguine',
   q:'Quel organe est le moteur de la circulation sanguine ?',
   opts:['Le foie','Les poumons','Le c≈ìur','Les reins'],ans:2,
   exp:'Le c≈ìur est le muscle central de la circulation. Il se contracte ~70 fois/min au repos pour propulser le sang dans tout l\'organisme.'},

  // === üß¨ Biologie ‚Äì Syst√®me nerveux ===
  {cat:'üß¨ Biologie ‚Äì Syst√®me nerveux',src:'Le syst√®me nerveux',
   q:'Quelle est la diff√©rence entre SNC et SNP ?',
   opts:['Ils sont identiques','SNC = cerveau + moelle √©pini√®re ; SNP = tous les nerfs en dehors','SNC = membres ; SNP = tronc','SNP = pens√©e ; SNC = mouvements'],ans:1,
   exp:'SNC (syst√®me nerveux central) : cerveau et moelle √©pini√®re. SNP (p√©riph√©rique) : tous les nerfs reliant le SNC au reste du corps (organes, muscles, peau).'},
  {cat:'üß¨ Biologie ‚Äì Syst√®me nerveux',src:'Le syst√®me nerveux',
   q:'Comment s\'appelle la cellule de base du syst√®me nerveux ?',
   opts:['L\'√©rythrocyte','Le neurone','Le myocyte','Le leucocyte'],ans:1,
   exp:'Le neurone transmet l\'influx nerveux via ses dendrites (r√©ception) et son axone (transmission). Les neurones forment des r√©seaux complexes coordonnant toutes les fonctions nerveuses.'},

  // === üö® S√©curit√© & Urgences ===
  {cat:'üö® S√©curit√© & Urgences',src:'Urgences m√©dicales',
   q:'Quels sont les signes d\'alerte d\'une m√©ningite bact√©rienne chez le nourrisson ?',
   opts:['L√©g√®re fi√®vre et toux','Fi√®vre √©lev√©e, fontanelle bombante, purpura (taches violac√©es ne disparaissant pas √† la pression)','Diarrh√©e et √©ruption ros√©e','Toux aboyante nocturne'],ans:1,
   exp:'M√©ningite bact√©rienne = urgence vitale. Nourrisson : fi√®vre, fontanelle bombante, pleurs aigus, hypotonie, refus de t√©t√©e, purpura (taches violac√©es = signe majeur). Appel 15 imm√©diat !'},
  {cat:'üö® S√©curit√© & Urgences',src:'S√©curit√©',
   q:'Que faire en cas d\'obstruction totale des voies a√©riennes chez un enfant > 1 an ?',
   opts:['Lui donner de l\'eau','5 claques dans le dos puis 5 compressions abdominales (Heimlich)','L\'allonger sur le ventre','Souffler dans la bouche'],ans:1,
   exp:'5 claques dans le dos (entre omoplates), puis 5 compressions abdominales (Heimlich). Pour nourrisson < 1 an : 5 tapes + 5 compressions THORACIQUES (jamais abdominales).'},
  {cat:'üö® S√©curit√© & Urgences',src:'S√©curit√©',
   q:'Quels sont les num√©ros d\'urgence en France ?',
   opts:['15 (SAMU), 17 (Police), 18 (Pompiers), 112 (Urgence europ√©enne)','10, 20, 30 et 40','999 et 911','Uniquement le 15 pour tout'],ans:0,
   exp:'15 = SAMU (urgences m√©dicales), 17 = Police, 18 = Pompiers, 112 = num√©ro europ√©en, 114 = sourds/malentendants, 0800 59 59 59 = Centre Antipoison.'},
  {cat:'üö® S√©curit√© & Urgences',src:'S√©curit√©',
   q:'Qu\'est-ce que le purpura fulminans ?',
   opts:['Une fi√®vre √©lev√©e due √† une grippe s√©v√®re','Des taches violac√©es ne disparaissant pas √† la pression ‚Äî signe de m√©ningite grave','Une √©ruption allergique b√©nigne','Une infection virale saisonni√®re'],ans:1,
   exp:'Le purpura fulminans = taches violac√©es r√©sistant √† la pression d\'un verre. Signe d\'une m√©ningite √† m√©ningocoque grave. Urgence absolue : appel 15 imm√©diat sans attendre.'},

  // === üè´ Modes d'accueil ===
  {cat:'üè´ Modes d\'accueil',src:'L\'accueil de l\'enfant',
   q:'Qu\'est-ce qu\'une halte-garderie ?',
   opts:['Un accueil r√©gulier √† temps plein','Une structure d\'accueil collectif occasionnel et flexible pour les < 6 ans','Un accueil exclusivement chez une assistante maternelle','Un accueil uniquement pour enfants handicap√©s'],ans:1,
   exp:'La halte-garderie offre un accueil collectif ponctuel (quelques heures/semaine). Distincte de la cr√®che (accueil r√©gulier).'},
  {cat:'üè´ Modes d\'accueil',src:'L\'accueil de l\'enfant',
   q:'Quelle est la diff√©rence entre accueil collectif et individuel ?',
   opts:['Aucune diff√©rence r√©glementaire','Collectif = plusieurs enfants dans une structure ; individuel = chez une assistante maternelle ou √† domicile','Individuel r√©serv√© aux nourrissons de < 3 mois','Collectif uniquement public'],ans:1,
   exp:'Accueil collectif : cr√®che, halte-garderie, jardin d\'enfants. Accueil individuel : chez une assistante maternelle agr√©√©e ou par une garde √† domicile.'},
  {cat:'üè´ Modes d\'accueil',src:'L\'accueil de l\'enfant',
   q:'Qu\'est-ce qu\'un Relais Petite Enfance (RPE) ?',
   opts:['Un service hospitalier p√©diatrique','Un service d\'information et de coordination pour l\'accueil individuel (assistantes maternelles, gardes √† domicile)','Une cr√®che collective priv√©e','Un service de remplacement pour assistantes maternelles'],ans:1,
   exp:'Le RPE (ex-RAM) informe et anime le r√©seau de l\'accueil individuel : aide aux parents, assistantes maternelles et gardes √† domicile dans leurs d√©marches.'},

  // === üßº Hygi√®ne professionnelle ===
  {cat:'üßº Hygi√®ne professionnelle',src:'Les biocontaminations',
   q:'Qu\'est-ce qu\'une biocontamination ?',
   opts:['Une pollution chimique par pesticides','Une contamination par des agents biologiques vivants (bact√©ries, virus, champignons, parasites)','Une contamination par des m√©taux lourds','Une r√©action allergique cutan√©e'],ans:1,
   exp:'Biocontamination : contamination par agents biologiques vivants. En EAJE : voie a√©rienne (toux), f√©cale-orale (mains sales) et contact direct.'},
  {cat:'üßº Hygi√®ne professionnelle',src:'Les produits d\'entretien',
   q:'Quelle est la diff√©rence entre d√©tergent et d√©sinfectant ?',
   opts:['Synonymes','D√©tergent = nettoie les salet√©s ; d√©sinfectant = tue les micro-organismes pathog√®nes','D√©sinfectant = nettoie ; d√©tergent = tue les microbes','Les d√©tergents sont toujours plus efficaces'],ans:1,
   exp:'D√©tergent : enl√®ve les souillures (d√©graissage). D√©sinfectant : d√©truit les pathog√®nes. On applique toujours d\'abord le d√©tergent, puis le d√©sinfectant.'},
  {cat:'üßº Hygi√®ne professionnelle',src:'Soins d\'hygi√®ne',
   q:'Pourquoi ne pas introduire de coton-tige dans le conduit auditif d\'un b√©b√© ?',
   opts:['Le b√©b√© n\'aime pas','Cela peut tasser le c√©rumen et ab√Æmer le tympan','Les cotons-tiges ne sont pas homologu√©s','Il n\'y a aucune contre-indication'],ans:1,
   exp:'Introduction dans le canal : tasse le c√©rumen (bouchon), risque d\'ab√Æmer le tympan, douleur, otite. On nettoie uniquement le pavillon externe avec le coin d\'un gant humide.'},
  {cat:'üßº Hygi√®ne professionnelle',src:'Hygi√®ne des mains',
   q:'Quand doit-on se laver les mains en EAJE ?',
   opts:['Seulement avant les repas','Uniquement apr√®s le change','Avant et apr√®s chaque soin, avant de pr√©parer les repas, apr√®s le change, apr√®s contact avec des s√©cr√©tions','Uniquement quand les mains sont visiblement sales'],ans:2,
   exp:'Le lavage des mains est la mesure d\'hygi√®ne la plus efficace. Obligatoire : avant/apr√®s chaque soin, change, pr√©paration des repas, contact avec des s√©cr√©tions ou surfaces souill√©es.'},
];

// ============================================================
const LETTERS = ['A','B','C','D'];
let curMode='all', quiz=[], idx=0, score=0, answered=false, catStats={};
let bestScores={};
try{bestScores=JSON.parse(localStorage.getItem('cap_scores')||'{}');}catch(e){bestScores={};}

function saveScores(){try{localStorage.setItem('cap_scores',JSON.stringify(bestScores));}catch(e){}}

function shuffleOptions(q){
  const c=q.opts.map((o,i)=>({text:o,isCorrect:i===q.ans}));
  for(let i=c.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[c[i],c[j]]=[c[j],c[i]];}
  const newAns=c.findIndex(o=>o.isCorrect);
  return{opts:c.map(o=>o.text),ans:newAns};
}

function shuffle(a){
  const b=[...a];
  for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]];}
  return b;
}

function buildHome(){
  const cats=[...new Set(QUESTIONS.map(q=>q.cat))];
  document.getElementById('totalQ').textContent=QUESTIONS.length;
  document.getElementById('totalCat').textContent=cats.length;
  const gb=Object.entries(bestScores).filter(([k])=>k==='exam'||k==='rapid').map(([,v])=>v);
  document.getElementById('bestScore').textContent=gb.length?Math.max(...gb)+'%':'‚Äì';
  const grid=document.getElementById('catGrid');
  grid.innerHTML='';
  cats.forEach(cat=>{
    const count=QUESTIONS.filter(q=>q.cat===cat).length;
    const emoji=cat.split(' ')[0];
    const name=cat.replace(/^[^\s]+\s/,'');
    const best=bestScores['c:'+cat]||0;
    const div=document.createElement('div');
    div.className='cat-card';
    div.innerHTML=`<div class="cat-emoji">${emoji}</div><div class="cat-name">${name}</div><div class="cat-cnt">${count} question${count>1?'s':''}</div><div class="cat-prog"><div class="cat-prog-fill" style="width:${best}%"></div></div>`;
    div.onclick=()=>startQuiz('c:'+cat);
    grid.appendChild(div);
  });
}

function startQuiz(mode){
  curMode=mode;
  let pool;
  if(mode==='exam') pool=shuffle(QUESTIONS);
  else if(mode==='rapid') pool=shuffle(QUESTIONS).slice(0,20);
  else{const catKey=mode.replace('c:','');pool=shuffle(QUESTIONS.filter(q=>q.cat===catKey));}
  quiz=pool.map(q=>{const s=shuffleOptions(q);return{...q,...s};});
  idx=0;score=0;answered=false;catStats={};
  document.getElementById('home').style.display='none';
  document.getElementById('quiz').style.display='block';
  document.getElementById('results').style.display='none';
  showQ();
}

function goHome(){
  document.getElementById('home').style.display='block';
  document.getElementById('quiz').style.display='none';
  document.getElementById('results').style.display='none';
  buildHome();
}

function showQ(){
  answered=false;
  const q=quiz[idx],total=quiz.length;
  document.getElementById('qNum').textContent=`${idx+1} / ${total}`;
  document.getElementById('qNumInner').textContent=`Question ${idx+1}`;
  const catShort=q.cat.replace(/^[^\s]+\s/,'').split('‚Äì')[1]?.trim()||q.cat.replace(/^[^\s]+\s/,'');
  document.getElementById('catBadge').textContent=catShort;
  document.getElementById('qSourceTag').textContent='üìñ '+q.src;
  document.getElementById('qText').textContent=q.q;
  document.getElementById('progFill').style.width=Math.round(idx/total*100)+'%';
  document.getElementById('scoreDisp').textContent=score;
  const c=document.getElementById('optsContainer');
  c.innerHTML='';
  q.opts.forEach((opt,i)=>{
    const d=document.createElement('div');
    d.className='opt';
    d.innerHTML=`<span class="opt-letter">${LETTERS[i]}</span><span class="opt-text">${opt}</span>`;
    d.onclick=()=>selectAnswer(i,d);
    c.appendChild(d);
  });
  document.getElementById('feedbackEl').className='feedback';
  document.getElementById('nextBtn').className='next-btn';
  const card=document.getElementById('qcard');
  card.style.animation='none';
  requestAnimationFrame(()=>{card.style.animation='';});
}

function selectAnswer(i,el){
  if(answered)return;
  answered=true;
  const q=quiz[idx];
  document.querySelectorAll('.opt').forEach(o=>o.classList.add('disabled'));
  if(!catStats[q.cat])catStats[q.cat]={ok:0,tot:0};
  catStats[q.cat].tot++;
  const fb=document.getElementById('feedbackEl');
  if(i===q.ans){
    score++;el.classList.add('correct');
    fb.className='feedback correct-fb show';
    document.getElementById('fbHead').textContent='‚úÖ Bonne r√©ponse !';
    catStats[q.cat].ok++;
  }else{
    el.classList.add('wrong');
    document.querySelectorAll('.opt')[q.ans].classList.add('correct');
    fb.className='feedback wrong-fb show';
    document.getElementById('fbHead').textContent='‚ùå Pas tout √† fait‚Ä¶';
  }
  document.getElementById('fbBody').textContent=(i!==q.ans?'‚úî Bonne r√©ponse : "'+q.opts[q.ans]+'". ':'')+q.exp;
  document.getElementById('scoreDisp').textContent=score;
  const nb=document.getElementById('nextBtn');
  nb.textContent=idx<quiz.length-1?'Question suivante ‚Üí':'Voir mes r√©sultats üèÅ';
  nb.className='next-btn show';
}

function nextQ(){
  idx++;
  if(idx>=quiz.length)showResults();
  else showQ();
}

function showResults(){
  document.getElementById('quiz').style.display='none';
  document.getElementById('results').style.display='block';
  const total=quiz.length,pct=Math.round(score/total*100);
  document.getElementById('resPct').textContent=pct+'%';
  document.getElementById('resFrac').textContent=score+' / '+total;
  const circ=2*Math.PI*70;
  const arc=document.getElementById('scoreArc');
  arc.style.strokeDasharray=circ;arc.style.strokeDashoffset=circ;
  arc.style.stroke=pct>=80?'#6b8f71':pct>=60?'#d4a843':'#c1724f';
  setTimeout(()=>{arc.style.strokeDashoffset=circ-(pct/100)*circ;},100);
  let title,sub;
  if(pct>=90){title='üèÜ Excellent !';sub='Parfaite ma√Ætrise du programme. Vous √™tes pr√™te pour l\'examen !';}
  else if(pct>=75){title='üéâ Tr√®s bien !';sub='Tr√®s bon niveau. Revoyez les th√®mes les plus faibles pour √™tre parfaite.';}
  else if(pct>=60){title='üëç Bien !';sub='Bonnes bases. Concentrez-vous sur vos points faibles.';}
  else if(pct>=40){title='üìö En progression';sub='Relisez les fiches et revenez vous tester !';}
  else{title='üí™ Allez, on r√©vise !';sub='Recommencez th√®me par th√®me pour bien ancrer les notions cl√©s.';}
  document.getElementById('resTitle').textContent=title;
  document.getElementById('resSub').textContent=`${score} bonne${score>1?'s':''} r√©ponse${score>1?'s':''} sur ${total} ‚Äî ${sub}`;
  bestScores[curMode]=Math.max(pct,bestScores[curMode]||0);
  Object.keys(catStats).forEach(cat=>{
    const p=Math.round(catStats[cat].ok/catStats[cat].tot*100);
    bestScores['c:'+cat]=Math.max(p,bestScores['c:'+cat]||0);
  });
  saveScores();
  const bd=document.getElementById('breakdown');
  bd.innerHTML='';
  Object.entries(catStats).forEach(([cat,s])=>{
    const p=Math.round(s.ok/s.tot*100);
    const emoji=cat.split(' ')[0];
    const name=cat.replace(/^[^\s]+\s/,'');
    const color=p>=70?'#6b8f71':p>=40?'#d4a843':'#c1724f';
    bd.innerHTML+=`<div class="bd-row"><div class="bd-emoji">${emoji}</div><div class="bd-name">${name}</div><div class="bd-bar-wrap"><div class="bd-bar-fill" style="width:${p}%;background:${color}"></div></div><div class="bd-score">${s.ok}/${s.tot}</div></div>`;
  });
  document.getElementById('replayBtn').onclick=()=>startQuiz(curMode);
}

buildHome();
</script>
</body>
</html>
